#include <iostream>
#include <vector>
#include <string> // This include isn't used, but was in your original
using namespace std;

// Prints only the FIRST subsequence with sum k
// and returns true. If no subsequence exists, returns false.

bool printt(int i, vector<int>&ds, int s, int sum, int n, vector<int>&arr)
{
    if(i == n)
    {
        // Base case: Reached the end
        if(s == sum)
        {
            // Found a valid subsequence
            for(auto it: ds)
            {
                cout << it << " ";
            }
            cout << endl;
            return true; // Found it!
        }
        else return false; // This path didn't work
    }
    
    // --- "Take" or "Include" arr[i] ---
    ds.push_back(arr[i]);
    s = s + arr[i];
    
    // Recurse for the "take" path
    // If this call returns true, it means a solution was found.
    // We immediately return true to stop further recursion.
    if (printt(i + 1, ds, s, sum, n, arr) == true)
    {
        return true;
    }
    
    // --- Backtrack ---
    s = s - arr[i];
    ds.pop_back();
    
    // --- "Not Take" or "Exclude" arr[i] ---
    // If we are here, the "take" path did NOT find a solution.
    // Now we try the "not take" path.
    // If this call returns true, we return true.
    if (printt(i + 1, ds, s, sum, n, arr) == true)
    {
        return true;
    }
    
    // If we reach this point, neither "take" nor "not take"
    // found a solution from this state.
    return false;
}

int main() {
    
    vector<int> ds;
    vector<int> arr = {1, 2, 1};
    int n = arr.size();
    int sum = 2;
    
    // Call the function and store the result
    bool found = printt(0, ds, 0, sum, n, arr);
    
    if (found)
    {
        cout << "A subsequence with the sum was found." << endl;
    }
    else
    {
        cout << "No subsequence with the sum was found." << endl;
    }
    
    cout << "finished";
    
    return 0;
}